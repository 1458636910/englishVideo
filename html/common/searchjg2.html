<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/iconfont.css" />
    <style>
        body {}

        #app {
            background: white;
            min-height: 100vh;
        }
        [v-cloak]{
          /*display: none;*/
        }
        /*type1*/

        .type1 .lists{
          padding: 3vw;
        }
        .type1 .list{
          margin-bottom: 5vw;
        }
        .type1 .img{
          width: 94vw;
          height: 50vw;
          position: relative;
        }
        .type1 .img img{
          width: 100%;
          height: 100%;
          object-fit: cover;
          border-radius: 5px;
        }
        .type1 .top{
          position: absolute;
          top: 3vw;
          left: 3vw;
          color: white;
        }
        .type1 .info{
          display: flex;
          align-items: center;
          margin-top: 3vw;
        }
        .type1 .head{
          width: 15vw;
          height: 15vw;
          border-radius: 50%;
          margin-right: 3vw;
        }
        .type1 .head img{
          width: 100%;
          height: 100%;
          border-radius: 50%;
          object-fit: cover;
        }
        .type1 .nameBox{
          width: 76vw;
          height: 10vw;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        }
        .type1 .name{
          overflow: hidden;
          text-overflow: ellipsis;
          display: -webkit-box;
          -webkit-line-clamp: 1;
          -webkit-box-orient: vertical;
          color: #203252;
        }
        .type1 .des{
          overflow: hidden;
          text-overflow: ellipsis;
          display: -webkit-box;
          -webkit-line-clamp: 1;
          -webkit-box-orient: vertical;
          font-size: 12px;
          color: #7C8798;
        }
        /**/
        .shop .lists{
          display: flex;
          flex-wrap: wrap;
          padding: 3vw;
        }
        .shop .list{
          width: 45vw;
          margin-right: 3vw;
          margin-bottom: 3vw;
        }
        .shop .list:nth-child(2n+2){
          margin-right: 0;
        }
        .shop .img{
          width: 45vw;
          height: 45vw;
          border-radius: 5px;
          margin-bottom: 3vw;
        }
        .shop .img img{
          width: 100%;
          height: 100%;
          border-radius: 5px;
        }
        .shop .info{
          color: #374663;
        }
        .shop .price{
          color: #F96480;
          margin-top: 3vw;
        }
        /**/

        .store .lists{
          padding: 3vw;
        }
        .store .list{
          display: flex;
          align-items: center;
          justify-content: space-between;
          border-bottom: 1px solid #f5f5f5;
          padding-bottom: 3vw;
          margin-bottom: 3vw;
        }
        .store .left{
          width: 60vw;
          display: flex;
          align-items: center;
        }
        .store .img{
          width: 15vw;
          height: 15vw;
          border-radius: 50%;
          background: #FA607D;
          margin-right: 3vw;
        }
        .store .shopname{
          max-width: 42vw;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          height: 13vw;
          color: #999999;
          font-size: 13px;
        }
        .store .name{
          overflow: hidden;
          text-overflow: ellipsis;
          display: -webkit-box;
          -webkit-line-clamp: 1;
          -webkit-box-orient: vertical;
          color: #4F4F4F;
          font-size: 16px;
        }
        .store .img img{
          width: 100%;
          height: 100%;
          object-fit: cover;
          border-radius: 50%;
        }
        .store .right span{
          width: 30vw;
          height: 8vw;
          text-align: center;
          line-height: 8vw;
          border-radius: 4vw;
          border: 1px solid #FA607D;
          color: #FA607D;
        }
        .store .right span:active{
          background: #f5f5f5;
          color: #999999;
          border: 1px solid #f5f5f5;
        }
        /**/
        .nav{
          padding: 3vw;
        }
        .nav span{
          margin-right: 3vw;
        }
        .nav .active{
          color: #FA6F89;
        }
        /**/
        .livelists{
          padding: 3vw;
          display: flex;
          flex-wrap: wrap;
        }
        .livelist{
          width: 45vw;
          height: 45vw;
          border-radius: 5px;
          overflow: hidden;
          margin-right: 3vw;
          margin-bottom: 3vw;
          position: relative;
        }
        .livelist:nth-child(2n+2){
          margin-right: 0;
        }
        .liveimg{
          width: 45vw;
          height: 45vw;
          border-radius: 5px;
        }
        .livetop{
          width: 100%;
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          padding: 1vw;
          color: white;
          font-size: 12px;
        }
        .livetop span:nth-child(1){
          background: #FA607D;
          padding: 1px 10px;
          border-radius: 10px;
          font-size: 13px;
        }
        .livebom{
          width: 100%;
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          padding: 1vw;
          box-sizing: border-box;
          display: flex;
          justify-content: space-between;
        }
        .livehead{
          display: flex;
          align-items: center;
          color: white;
          font-size: 13px;
        }
        .livehead img{
          width: 8vw;
          height: 8vw;
          border-radius: 50%;
          margin-right: 5px;
        }
        .scnum{
          display: flex;
          align-items: center;
          font-size: 12px;
          color: white;
        }
        /**/

    </style>
</head>

<body>
    <div id="app" v-cloak>
      <!-- 商家 -->
      <div class="empty" v-if="list.length == 0">
        <img src="../../image/empty.png" alt="">
      </div>
        <div class="store">
          <div class="lists">
            <div class="list" v-for="(item,index) in list" @click="goshopdetail(item)">
              <div class="left">
                <div class="img">
                  <img :src="item.logo" alt="">
                </div>
                <div class="shopname">
                  <p class="name">{{item.business_name}}</p>
                  <p>Followers:{{item.fans_count}}</p>
                </div>
              </div>
              <div class="right">
                <span>VISIT SHOP</span>
              </div>
            </div>
          </div>
        </div>


    </div>

</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/fastclick.js"></script>
<script src="../../script/vue.min.js"></script>
<script src="../../script/commonurl.js"></script>
<script type="text/javascript">
    apiready = function() {
        var app = new Vue({
            el: '#app',
            data() {
                return {
                  type:'',
                  active:1,
                  keywords:'',
                  list:[],
                  page:1,
                  more:true,
                  allpage:1
                }
            },
            created() {
                api.refreshHeaderLoading();
                setTimeout(()=>{
                  api.refreshHeaderLoadDone();
                },300)
              this.keywords = api.pageParam.keywords
              // alert(this.keywords)
              this.type = api.pageParam.type
              // alert(api.pageParam.type)
              this.resresh()
              // this.getKeywordsList()
              this.getMore()
            },
            methods: {

                getLists() {
                    var _this = this;
                    var data = {
                        keyword: api.pageParam.keywords,
                        page: _this.page,
                    };
                    requstPost('store/search', data, function success(ret) {
                        if (ret.code == 0) {
                            _this.page += 1
                            _this.list = _this.list.concat(ret.data.list)
                            if (ret.data.list.length < 20) {
                                _this.more = false
                            }
                        }else {
                          _this.more = false
                        }

                    }, function fail(err) {

                    })
                },
              //监听滚动到底

              getMore() {
                var _this = this
                api.addEventListener({
                    name: 'scrolltobottom',
                    extra: {
                        threshold: 0 //设置距离底部多少距离时触发，默认值为0，数字类型
                    }
                }, function(ret, err) {
                  console.log('加载更多');
                  if (_this.more) {
                    _this.getLists()
                  }
                });

              },
              //查看商品详情
            goshopdetail(ite){
              api.openWin({
                  name: 'shophome_win',
                  url: './shophome_win.html',
                  pageParam: {
                      id: ite.id
                  }
              });

            },
              resresh(){
                var _this = this
                    api.setRefreshHeaderInfo({
                        visible: true,
                        loadingImg: 'widget://image/loading_more1.png',
                        bgColor: 'rgba(0,0,0,0)',
                        textColor: '#000',
                        textDown: 'Drop Down',
                        textUp: 'Release',
                        textLoading:'Loading...',
                        showTime:false,
                        textTime:'',
                    }, function(ret, err) {
                      _this.page = 1;
                      _this.more = true;
                      _this.list = [];
                      _this.getLists()
                    });
              },


            }
        })

    };
</script>

</html>

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/iconfont.css" />
    <style>
        body,html {
          background: none;
        }

        #app {
            background: none;
            /*min-height: 100vh;*/
            box-sizing: border-box;
        }
        [v-cloak]{
          /*display: none;*/
        }
        #footer{
          padding-bottom: 3vw;
        }
        .footer{
          padding:0 3vw;
          color: white;
        }
        .count{
          margin-top: 3vw;
          font-size: 14px;
          overflow: hidden;
          text-overflow: ellipsis;
           display: -webkit-box;
           -webkit-line-clamp: 2;
           -webkit-box-orient: vertical;
        }
        .plBox{
          /*width: 40vw;*/
          margin-top: 3vw;
          height: 10vw;
          line-height: 10vw;
          text-align: left;
          border-radius: 5vw;
          padding-left: 3vw;
          color: #363639;
          box-sizing: border-box;
          background: rgba(204, 204, 206, 0.68);
        }
    </style>
</head>

<body>
    <div id="app" v-cloak>
      <footer id="footer">
        <div class="footer">
          <h3>{{full_name}}</h3>
          <p class="count">{{videotitle}}</p>
          <div class="progressBox">

          </div>
          <div class="plBox"  @click="sendPl()">
            Comments...
          </div>
        </div>
      </footer>
    </div>

</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/fastclick.js"></script>
<script src="../../script/vue.min.js"></script>
<script src="../../script/commonurl.js"></script>
<script type="text/javascript">
var app;
    apiready = function() {
        $api.fixTabBar($api.byId('footer'));
        app = new Vue({
            el: '#app',
            data() {
                return {
                  videotitle:'',
                  full_name:'',
                }
            },
            created() {
              this.videotitle = api.pageParam.videotitle
              this.full_name = api.pageParam.name

            },
            methods: {
              setInfo(tit,count){
                this.full_name = tit
                this.videotitle = count
              },
              sendPl() {
                api.execScript({
                    name: 'douyin_win',
                    // frameName: 'frmName',
                    script: 'sendPl();'
                });

                return
                var _this = this
                var inputField = api.require('inputField');
                inputField.setInputFieldListener(function(ret, err) {
                    if (ret) {
                        if (ret.chatViewH < 50) {

                        }
                        console.log(JSON.stringify(ret));
                    } else {
                        console.log(JSON.stringify(err));
                    }
                });
                // inputField.becomeFirstResponder(function(ret, err) {
                //     if (ret.status) {
                //         console.log(JSON.stringify(ret));
                //     } else {
                //         console.log(JSON.stringify(err));
                //     }
                // });
                inputField.open({
                    bgColor: '#ffffff',
                    lineColor: '#999999',
                    fileBgColor: '#f5f5f5',
                    borderColor: '#999999',
                    placeholder: '',
                    autoFocus: true,
                    maxLines: 5,
                    limitedWordsNumber: 100,
                    sendBtn: {
                        bg: '#FB607D',
                        title: 'Send',
                        titleColor: '#fff',
                        bgHighlight: '#e67187',
                    },
                    fixedOn: api.frameName
                }, function(ret, err) {
                    if (ret) {
                        if (ret.msg != '') {
                            console.log(ret.msg + 'end');
                            // _this.sendPl(ret.msg)
                            inputField.resignFirstResponder();
                            api.sendEvent({
                                name: 'livechatText',
                                extra: {
                                    msg: ret.msg,
                                }
                            });
                        }
                        // alert(JSON.stringify(ret));


                    } else {
                        // alert(JSON.stringify(err));
                    }
                });
                inputField.setInputFieldListener(function(ret, err) {
                    if (ret) {
                        console.log(JSON.stringify(ret));
                        if (ret.chatViewH <= 50) {
                            inputField.close();
                        }
                        // alert(JSON.stringify(ret));
                    } else {
                        // alert(JSON.stringify(err));
                    }
                });

              },


            }
        })

    };
    function closeWin(){
      api.closeWin();
    }
</script>

</html>
